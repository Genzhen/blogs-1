## 模块目录

* 模块安装过程

  - 发出npm install命令

  - npm 向 registry 查询模块压缩包的网址

  - 下载压缩包，存放在~/.npm目录

  - 解压压缩包到当前项目的node_modules目录  

  备注：一个模块安装以后，本地其实保存了两份。一份是~/.npm目录下的压缩包，另一份是node_modules目录下解压后的代码。  

* 缓存目录

  > npm install或npm update命令，从 registry 下载压缩包之后，都存放在本地的缓存目录。

* 从缓存中安装依赖包

  --cache-min 参数指定一个时间（单位为分钟），只有超过这个时间的模块，才会从 registry 下载。

  `npm install --cache-min [9999999|Infinity] <package-name>`

## npm 模块安装机制

  安装之前，npm install会先检查，node_modules目录之中是否已经存在指定模块。如果存在，就不再重新安装了，即使远程仓库已经有了一个新版本，也是如此。如果你希望，一个模块不管是否安装过，npm 都要强制重新安装，可以使用-f或--force参数。

  -- registry 指定安装依赖包镜像地址


## npm config

* 指定npm模块下载为第三方镜像地址

  用户目录下的.npmrc文件（/Users/cycle263/.npmrc）, `registry=https://registry.npm.taobao.org`, 或者`npm config set registry https://registry.npm.taobao.org`

  > window下文件地址：’nodejs安装目录/node_modules/npm/.npmrc‘

* 修改全局安装模块地址

  用户目录下的.npmrc文件（/Users/cycle263/.npmrc）, `prefix=/Users/npm_modules`

* 优质的镜像地址

  ```json
  alibaba: http://registry.npm.alibaba-inc.com
  npm: https://registry.npmjs.org/
  cnpm: http://r.cnpmjs.org/
  taobao: http://registry.npm.taobao.org/
  edunpm: http://registry.enpmjs.org/
  eu: http://registry.npmjs.eu/
  au: http://registry.npmjs.org.au/
  sl: http://npm.strongloop.com/
  nj: https://registry.nodejitsu.com/
  pt: http://registry.npmjs.pt/
  ```