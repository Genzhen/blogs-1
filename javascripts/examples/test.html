<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test</title>
    <style media="screen">
      body{font-size: 14px;}
      a{display: inline-block;margin: 24px;}
    </style>
  </head>
  <body>
    <form class="" action="test.html" method="post" enctype="multipart/form-data">
      <input type="file" name="name" value="">
      <button type="submit" name="button">Submit</button>
    </form>
    <p>点击复制后在右边textarea CTRL+V看一下</p>
    <input type="text" id="inputText" value="测试文本" />
    <input type="button" id="btn" value="复制" />
    <textarea rows="4"></textarea>
    <main>
      <div class="parent">
        <div class="child-1">
          <div class="child-1-1"></div>
          <div class="child-1-2">
            <div class="child-1-2-1"></div>
          </div>
          <div class="child-1-3">
            <div class="child-1-3-1"></div>
            <div class="child-1-3-2"></div>
            <div class="child-1-3-3"></div>
          </div>
        </div>
        <div class="child-2">
          <div class="child-2-1"></div>
        </div>
        <div class="child-3">
          <div class="child-3-1">
            <div class="child-3-1-1"></div>
          </div>
        </div>
        <div class="child-4">
          <div class="child-4-1">
            <div class="child-4-1-1">
              <div class="child-4-1-1-1">
                <div class="child-4-1-1-1-1"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script type="text/javascript">
      var btn = document.getElementById('btn');
      btn.addEventListener('click', function () {
        var inputText = document.getElementById('inputText');
        var currentFocus = document.activeElement;
        inputText.focus();
        inputText.setSelectionRange(0, inputText.value.length);
        document.execCommand('copy', true);
        currentFocus.focus();
      });
    </script>

    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
      (function(global, undefined){
        $('input').on('change', function(e){
          var f = new FormData();
          f.append('file', this.files[0]);
          $.ajax({
            url: 'test.html',
            type: 'POST',
            data: f,
            dataType: 'JSON',
            cache: false,
            processData: false,
            contentType: false,
            success: function(res){
              console.log(res);
            }
          });
        });

        var xhr = new XMLHttpRequest();
        xhr.onload = function() {
            var objectURL = URL.createObjectURL(this.response),
                link = document.createElement("a");
            link.href = objectURL;
            link.download = "test.png";
            link.innerText = 'download png';
            link.onload = function(e) {
                window.URL.revokeObjectURL(this.href);
            };
            document.body.appendChild(link) ;
        } ;
        xhr.open("get", 'http://s1.95171.cn/b/img/xms_mobile.v807112724.png');
        xhr.responseType = "blob";
        xhr.send(null);

        // promise
        Promise.resolve($.getJSON('./test.json', r => {
          console.log(r);
        }));
      })(window);
    </script>
  </body>
</html>
