<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test</title>
    <style media="screen">
      body{font-size: 14px;}
      a{display: inline-block;margin: 24px;}
    </style>
  </head>
  <body>
    <form class="" action="test.html" method="post" enctype="multipart/form-data">
      <input type="file" name="name" value="">
      <button type="submit" name="button">Submit</button>
    </form>

    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
      (function(global, undefined){
        $('input').on('change', function(e){
          var f = new FormData();
          f.append('file', this.files[0]);
          $.ajax({
            url: 'test.html',
            type: 'POST',
            data: f,
            dataType: 'JSON',
            cache: false,
            processData: false,
            contentType: false,
            success: function(res){
              console.log(res);
            }
          });
        });

        var xhr = new XMLHttpRequest();
        xhr.onload = function() {
            var objectURL = URL.createObjectURL(this.response),
                link = document.createElement("a");
            link.href = objectURL;
            link.download = "test.png";
            link.innerText = 'download png';
            link.onload = function(e) {
                window.URL.revokeObjectURL(this.href);
            };
            document.body.appendChild(link) ;
        } ;
        xhr.open("get", 'http://s1.95171.cn/b/img/xms_mobile.v807112724.png');
        xhr.responseType = "blob";
        xhr.send(null);
      })(window);
    </script>
  </body>
</html>
