<!DOCTYPE>
<html>
<head>
    <title>jquery聚焦文本框 - 计划</title>
    <style media="screen">
    .signature{
      width: 216px;
      padding: 4px;
      overflow: hidden;
      word-break: break-all;
      word-wrap: break-word;
      text-overflow: ellipsis;
    }
    .ellipsis{
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }
    .signature.editabled{
      border: 1px solid #ccc;
      outline: none;
      border-radius: 6px;
    }
    </style>
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.js" type="text/javascript"></script>
</head>
<body>
<form action="http://www.google.com.hk" id="cse-search-box">
  <div>
    <input type="hidden" name="cx" value="partner-pub-7740261255677392:7064996710" />
    <input type="hidden" name="ie" value="UTF-8" />
    <!--文本框--><input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="&#x641c;&#x7d22;" />
  </div>
  <!--<img src="../../../../myProject/images/kk.gif" > -->
</form>
<div class="" style="position:relative;">
  <ul class="content" contenteditable="true">

  </ul>

  <ul class="insert-items" style="display: none;">

  </ul>
</div>
<div class="signature" contenteditable="" title=""></div>

<div>
  <img id="myimg" src="https://zos.tests.com/tests/KvGsQXDHLoLiTIE1x.png" alt="" />
  <div>
    标题
  </div>
  <div>
    arrow-left
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function () {
    // alert('test ready');
    $('body').on('click', '.signature', function(){
      $(this).addClass('editabled').scrollTop(9999);
    });

    window.onbeforeunload = function (e) {
      if (!confirm('离开当前页面?')) return;
  　　 var e = window.event || e;
  　　 e.returnValue = ("确定离开当前页面吗？");
      console.log('离开当前页面');
    }
  });

  window.addEventListener('beforeunload', function (event) { 
    if (!confirm('离开当前页面?')) return;
  });

  window.onunload = function(){
    alert('unoload');
  }

  window.onerror = function (msg, url, lineNo, columnNo, error) {
    var string = msg.toLowerCase();
    var substring = "script error";
    if (string.indexOf(substring) > -1){
        alert('Script Error: See Browser Console for Detail');
    } else {
        var message = [
            'Message: ' + msg,
            'URL: ' + url,
            'Line: ' + lineNo,
            'Column: ' + columnNo,
            'Error object: ' + JSON.stringify(error)
        ].join(' - ');

        alert(message);
    }

    return false;
  };

  // test();

  // 单列list转多列table展示
  var arr = [1, 2, 34, 35, 432, 3423, 432, 4, 4, 6564, 'u7', 657, 7657, 767, 655];
  function transData(arr, num) {
    if (!Array.isArray(arr)) return;
    var c = num || 10;
    var remainder = arr.length % c;
    var complement = (new Array(c - remainder)).join(',').split(',');
    var all = arr.concat(complement);
    return all.map((item, i) => {
      return `${i === 0 && i % c === 0 ? '<tr>' : i !== 0 && i % c === 0 ? '</tr><tr>' : ''}<td>${item}</td>${i === all.length - 1 ? '</tr>' : ''}`;
    }).join('');
  }
  transData(arr, 6);
</script>
</body>
</html>
