<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MediaDevices</title>
  </head>
  <body>
    <input id="recordBtn" type="button" value="Record" />
    <input id="stopBtn" type="button" value="Stop" />
    <audio id="recordAudio" autoplay="true"></audio>

    <script type="text/javascript">
      // çº¯html5 api
      (function(window){
        window.URL = window.URL || window.webkitURL;
        navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
        var recordBtn = document.querySelector('#recordBtn');
        var stopBtn = document.querySelector('#stopBtn');
        var audio = document.querySelector('#recordAudio');

        recordBtn.addEventListener('click', function(){
          navigator.mediaDevices.getUserMedia({audio: true})
          .then(function(mediaStream){
            recordBtn.mediaStream = mediaStream;
          }).catch(function(err){
            console.error(err);
          });
        });
        stopBtn.addEventListener('click', function(){
          audio.src = window.URL.createObjectURL(recordBtn.mediaStream);
        });
      })(window);
    </script>
  </body>
</html>
