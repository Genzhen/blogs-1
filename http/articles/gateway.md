## Gateway(网关)

将所有的API的调用统一接入API网关层，由网关层负责接入和输出。API网关，就是为了解放客户端与服务端而存在的。对于客户端，使开放给客户端的接口标准统一，以降低客户端的接入成本；对于服务端，使服务端无需关注接口暴露在公网面临的问题而着眼于业务的实现，来提升开发效率。

* 网关的功能

  - 统一接入：支持http、jsf服务快捷接入，mock功能加快协同开发

  - 平台化：进行各项数据监控，提供数据分析、监控告警、故障定位等服务

  - 高性能：在高吞吐量下保证低延迟

    网关高并发实践主要利用异步化处理技术，将请求由同步变为异步，利用NIO多路复用，达到请求接收最大化。

  - 安全防护：身份认证、精细化流量控制、大数据实时分析等多种手段保障服务质量

    网关提供秒级的流量控制，可以对单个接口按地域、风控等级等维度进行流控配置。流控主要是采用令牌桶算法实现，策略主要有排队或熔断，具体的策略根据不同的端，选择合适的流控动作。

    api网关通过访问权限控制、签名认证、跨域校验等来尽可能的降低API接口被刷的风险。

  - 灰度发布，支持按设备、PIN、自定义比例方式在不影响正常用户的情况下，保障后端服务平稳过渡

* vs proxy

- 不只是数据透传，还有协议适配转换